% include the figures path relative to the master file
\graphicspath{ {./content/method/figures/} }

\section{Experimental Setup}\label{sec:exp}

The experimental set-up is summarized in table~\ref{tab:survey-tab}.
Where the most relevant works in Sect.\,\ref{sec:review} are formulated as the as the 5-steps standard classification procedure described in Fig.\,\ref{fig:ML-scheme}.

\input{content/method/Survey-Table.tex}

\subsection{Implementation details}\label{sec:exp:implementation}
For reproductivity purposes, the experimentation described in this work can be found in \cite{rethinopaty20016apr-repoICPR},
where the image processing and \gls{ml} rapid pipeline prototyping library \emph{Protoclass}~\cite{protoclass2016apr-repoICPR} has been used to implement the methodologies in Tab.\,\ref{tab:survey-tab} in accordance to proposed experimentation framework.
Each methodology implementation can be seen as a plug-in to experiment in \cite{rethinopaty20016apr-repoICPR}, while references to stand-alone implementation of these methodologies can be found in Tab.\,\ref{tab:survey-tab}.
All the repositories are publicly available and provided with tests to ensure that our implementation agrees with the results reported by the original works.
\footnote{Note that methodologies where this quality control could not had been enforced have been discarded for experimentation and only reviewed based on the results reported by the original work and compiled in Sect.\,\ref{sec:review}.}

\subsection{Evaluation}\label{sec:exp:evaluation}
All the experiments are evaluated in terms of \gls{se} and \gls{sp} (see Fig.\,\ref{fig:evaluation}) using the \gls{ltpocv} strategy, in line with \cite{Lemaintre2015miccaiOCT}.
Therefore, at each cross-validation iteration, a \gls{dme} and normal volumes are kept for testing, while the remaining volumes are used as training.
The \gls{se} evaluates the performance of the classifier with respect to the positive class, while the \gls{sp} evaluates its performance with respect to negative class.

\input{./content/method/figures/evaluation_corolary_def.tex}
\begin{figure}

  \def\myRadius{.65cm}
  \def\vennSpace{(0,0) rectangle (2.6cm,1.6cm)}
  \def\predictedCircle{(.8cm,.8cm) circle (\myRadius)}
  \def\actualCircle{(1.8cm,.8cm) circle (\myRadius)}
  \def\myLabelRadius{.450cm}

  \subfigure[][Confusion matrix with truly and falsely positive samples detected (TP, FP) in the first row, from left to right and the falsely and truly negative samples detected (FN, TN) in the second row, from left to right.]{
    \label{fig:evaluation:confusion_matrix}
    \begin{tikzpicture}[scale=0.5]
      \node at (0,0){
        \begin{tabular}{
            >{\centering}m{1em} >{\centering}m{1em} >{\centering}m{1in} >{\centering\arraybackslash}m{1in}}
          % c>{\centering}m{2em}ccc}
          & & \multicolumn{2}{c}{ Actual Class }\\
          & & A+ & A- \\
          % \parbox[t]{2mm}{\multirow{2}{*}{\rotatebox[origin=c]{90}{\usebox \centering Predicted Class}}}& P+ &  \tikz{\tp} & \tikz{\fp} \\
          \multirow{3}{*}{\rotatebox[origin=c]{90}{Predicted Class}}& P+ &  \tikz{\tp} & \tikz{\fp} \\
          & P- & \tikz{\fn} & \tikz{\tn}
        \end{tabular}
      };
    \end{tikzpicture}
  }\\
  \centering
  \subfigure[][\gls{se} and \gls{sp} evaluation, corresponding to the ratio of the doted area over the blue area.]{
    \label{fig:evaluation:roc_axis}
    \begin{tikzpicture}[scale=0.5]
      \def\seEquation{$SE = \frac{TP}{TP+FN}$}
      \def\spEquation{$SP = \frac{TN}{TN+FP}$}
      \node[label={[]below:\seEquation}](se){\tikz{\se}};
      \node[right=5pt of se, label={[]below:\spEquation}]{\tikz{\sp}};
      % \node[label={[]right:\seEquation}](se){\tikz{\se}};
      % \node[below=5pt of se, label={[]right:\spEquation}]{\tikz{\sp}};
    \end{tikzpicture}
  }

  \caption{Evaluation metrics:
    \protect\subref{fig:evaluation:confusion_matrix} confusion matrix,
    \protect\subref{fig:evaluation:roc_axis} \gls{se} - \gls{sp}
  }
  \label{fig:evaluation}
\end{figure}

The use of \gls{ltpocv} implies that at each round, a pair \gls{dme}-normal volume is selected for testing while the remaining volumes are used for training.
Subsequently, no \gls{se} or \gls{sp} variance can be reported.
However, \gls{ltpocv} strategy has been adopted despite this limitation due to the reduced size of the dataset.

% \subsection{Management of data depending terms}
% \deleted[id=sik]{
%   Be aware that when computing the GMM~\cite{repo_des}, or the dictionary
%   \cite{repo_lem}, only the training data for the current fold is used.
%   Therefore such modules are recomputed at each fold.
% }
% \deleted[id=sik]{
%   Other parameter tuning such the case of XXXX and YYYYY are also carried out using only ZZZZ
% }
